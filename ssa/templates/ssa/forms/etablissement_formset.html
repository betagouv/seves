{% load partials %}

<div id="etablissement-management-form" class="fr-hidden">
    {{ formset.management_form }}
</div>

{% for form in formset %}
    {% partialdef form_dialog inline %}
        <button
            class="fr-btn fr-hidden"
            data-fr-opened="false"
            aria-controls="fr-modal-etablissement-{{ form.prefix }}"
        ></button>
        <dialog
            aria-labelledby="fr-modal-title-modal-etablissement-{{ form.prefix }}"
            role="alertdialog"
            id="fr-modal-etablissement-{{ form.prefix }}"
            class="fr-modal modal-etablissement"
            data-form-prefix="{{ form.prefix }}"
        >
            {% if form.instance.pk %}{{ form.id }}{% endif %}
            <div class="fr-container fr-container--fluid fr-container-md">
                <div class="fr-grid-row fr-grid-row--center">
                    <div class="fr-col-12 fr-col-md-10 fr-col-lg-8">
                        <div class="fr-modal__body">
                            <div class="fr-modal__header">
                                <button
                                    class="fr-btn--close fr-btn"
                                    title="Fermer la fenêtre modale"
                                    aria-controls="fr-modal-etablissement-{{ form.prefix }}"
                                    type="button"
                                >Fermer
                                </button>
                            </div>
                            <div class="fr-modal__content">
                                {{ form }}
                            </div>
                            <div class="fr-modal__footer">
                                <div class="fr-btns-group fr-btns-group--right fr-btns-group--inline-lg">
                                    <button
                                        class="fr-btn fr-btn--secondary"
                                        aria-controls="fr-modal-etablissement-{{ form.prefix }}"
                                        type="button"
                                    >Annuler
                                    </button>
                                    <button
                                        type="submit"
                                        class="fr-btn save-btn"
                                        id="etablissement-save-btn--{{ form.prefix }}"
                                        {% if form.instance.pk %}data-etablissement-prefix="{{ form.prefix }}"{% endif %}
                                    >Enregistrer
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </dialog>
    {% endpartialdef %}
{% endfor %}

<template id="etablissement-template" data-prefix="{{ formset.empty_form.prefix }}">
    {% with form=formset.empty_form %}{% partial form_dialog %}{% endwith %}
</template>


<template id="etablissement-card-template">
    <div class="etablissement-card">

        <div class="etablissement-card--header">
            <p class="raison-sociale"></p>

            <ul class="fr-btns-group fr-btns-group--sm fr-btns-group--inline-reverse fr-btns-group--inline-lg">
                <li>
                    <button
                        type="button"
                        class="etablissement-edit-btn fr-btn fr-btn--secondary fr-icon-edit-fill"
                        data-fr-opened="false"
                        title="Modifier l'établissement"
                    >
                    </button>
                    <span
                        class="fr-tooltip fr-placement edit-tooltip"
                        role="tooltip"
                        aria-hidden="true"
                    >
                        Modifier l'établissement
                    </span>
                </li>
                <li>
                    <button
                        type="button"
                        class="etablissement-delete-btn fr-btn fr-btn--secondary fr-icon-delete-fill"
                        title="Supprimer l'établissement"
                    >
                    </button>
                    <span
                        class="fr-tooltip fr-placement delete-tooltip"
                        role="tooltip"
                        aria-hidden="true"
                    >
                        Supprimer l'établissement
                    </span>
                </li>
            </ul>
        </div>

        <p class="type-exploitant fr-tag fr-hidden fr-mb-2v"></p>
        <p class="pays fr-tag fr-hidden fr-mb-2v"></p>
        <div class="structure"></div>
        <div class="numero-agrement fr-hidden"></div>
        <p
            class="position-dossier fr-badge fr-hidden fr-my-2v"
            data-reset-classes="position-dossier fr-badge fr-my-2v"
        ></p>
    </div>
</template>

<div class="fr-mt-2w" id="etablissement-card-container"></div>

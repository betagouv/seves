(function(f,m){typeof exports=="object"&&typeof module<"u"?module.exports=m():typeof define=="function"&&define.amd?define(m):(f=typeof globalThis<"u"?globalThis:f||self,f.Treeselect=m())})(this,function(){"use strict";var Ts=Object.defineProperty;var He=f=>{throw TypeError(f)};var Is=(f,m,v)=>m in f?Ts(f,m,{enumerable:!0,configurable:!0,writable:!0,value:v}):f[m]=v;var o=(f,m,v)=>Is(f,typeof m!="symbol"?m+"":m,v),re=(f,m,v)=>m.has(f)||He("Cannot "+v);var n=(f,m,v)=>(re(f,m,"read from private field"),v?v.call(f):m.get(f)),C=(f,m,v)=>m.has(f)?He("Cannot add the same private member more than once"):m instanceof WeakSet?m.add(f):m.set(f,v),E=(f,m,v,ee)=>(re(f,m,"write to private field"),ee?ee.call(f,v):m.set(f,v),v),a=(f,m,v)=>(re(f,m,"access private method"),v);var _,A,G,O,h,_e,X,De,Pe,J,R,Ve,Be,Ge,Ue,Me,Re,ze,Fe,Ye,je,We,Ke,Ze,$e,qe,Xe,oe,U,P,M,K,c,Q,Je,Qe,et,tt,st,it,ce,lt,nt,at,he,rt,ot,ct,ht,dt,ut,mt,pt,ft,de,gt,bt,ue,se,me,Ct,p,g,z,Z,F,I,N,T,V,d,pe,fe,Et,vt,wt,kt,Lt,ge,St,yt,xt,At,be,Ce,Ee,ve,we,Ot,ke,Tt,It,Nt,Ht,_t;const f={arrowUp:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>',arrowDown:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9l6 6 6-6"/></svg>',arrowRight:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>',attention:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',clear:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',cross:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',check:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>',partialCheck:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 25 25" fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>'},m=(l,e)=>{if(e.innerHTML="",typeof l=="string")e.innerHTML=l;else{const t=l.cloneNode(!0);e.appendChild(t)}},v=l=>{const e=l?{...l}:{};return Object.keys(f).forEach(t=>{e[t]||(e[t]=f[t])}),e},ee=l=>l.reduce((e,{name:t},s)=>(e+=t,s<l.length-1&&(e+=", "),e),"");class Dt{constructor({value:e,showTags:t,tagsCountText:s,clearable:i,isAlwaysOpened:r,searchable:u,placeholder:b,disabled:L,isSingleSelect:y,id:k,ariaLabel:w,iconElements:S,inputCallback:x,searchCallback:H,openCallback:D,closeCallback:B,keydownCallback:$,focusCallback:Y,nameChangeCallback:q}){C(this,h);o(this,"value");o(this,"showTags");o(this,"tagsCountText");o(this,"clearable");o(this,"isAlwaysOpened");o(this,"searchable");o(this,"placeholder");o(this,"disabled");o(this,"isSingleSelect");o(this,"id");o(this,"ariaLabel");o(this,"iconElements");o(this,"isOpened");o(this,"searchText");o(this,"srcElement");C(this,_);C(this,A);C(this,G);C(this,O);o(this,"inputCallback");o(this,"searchCallback");o(this,"openCallback");o(this,"closeCallback");o(this,"keydownCallback");o(this,"focusCallback");o(this,"nameChangeCallback");this.value=e,this.showTags=t,this.tagsCountText=s,this.searchable=u,this.placeholder=b,this.clearable=i,this.isAlwaysOpened=r,this.disabled=L,this.isSingleSelect=y,this.id=k,this.ariaLabel=w,this.iconElements=S,this.isOpened=!1,this.searchText="",E(this,_,a(this,h,Ge).call(this)),E(this,A,a(this,h,Ye).call(this)),E(this,G,a(this,h,Ke).call(this)),E(this,O,null),this.inputCallback=x,this.searchCallback=H,this.openCallback=D,this.closeCallback=B,this.keydownCallback=$,this.focusCallback=Y,this.nameChangeCallback=q,this.srcElement=a(this,h,Ve).call(this,{htmlTagsSection:n(this,_),htmlEditControl:n(this,A),htmlOperators:n(this,G)}),a(this,h,_e).call(this)}focus(){setTimeout(()=>n(this,A).focus(),0)}blur(){this.isOpened&&a(this,h,R).call(this),this.clearSearch(),n(this,A).blur()}updateValue(e){this.value=e,a(this,h,X).call(this),a(this,h,J).call(this)}removeItem(e){this.value=this.value.filter(t=>t.id!==e),a(this,h,oe).call(this),a(this,h,X).call(this),a(this,h,J).call(this)}clear(){this.value=[],a(this,h,oe).call(this),a(this,h,X).call(this),this.clearSearch()}openClose(){a(this,h,R).call(this)}clearSearch(){this.searchText="",this.searchCallback(""),a(this,h,J).call(this)}}_=new WeakMap,A=new WeakMap,G=new WeakMap,O=new WeakMap,h=new WeakSet,_e=function(){a(this,h,X).call(this),a(this,h,J).call(this),a(this,h,De).call(this)},X=function(){if(n(this,_).innerHTML="",this.showTags){n(this,_).append(...a(this,h,Ue).call(this));const e=ee(this.value);this.nameChangeCallback(e)}else{const e=a(this,h,Fe).call(this);n(this,_).appendChild(e),this.nameChangeCallback(e.innerText)}n(this,_).appendChild(n(this,A))},De=function(){const e=[];n(this,G).innerHTML="",this.clearable&&e.push(a(this,h,Ze).call(this)),this.isAlwaysOpened||e.push(a(this,h,qe).call(this,this.isOpened)),e.length&&n(this,G).append(...e)},Pe=function(){if(!this.isAlwaysOpened&&n(this,O)){const e=this.isOpened?this.iconElements.arrowUp:this.iconElements.arrowDown;m(e,n(this,O))}},J=function(){var e;(e=this.value)!=null&&e.length?(n(this,A).removeAttribute("placeholder"),this.srcElement.classList.remove("treeselect-input--value-not-selected")):(n(this,A).setAttribute("placeholder",this.placeholder),this.srcElement.classList.add("treeselect-input--value-not-selected")),this.searchable?this.srcElement.classList.remove("treeselect-input--unsearchable"):this.srcElement.classList.add("treeselect-input--unsearchable"),this.isSingleSelect?this.srcElement.classList.add("treeselect-input--is-single-select"):this.srcElement.classList.remove("treeselect-input--is-single-select"),n(this,A).value=this.searchText},R=function(){this.isOpened=!this.isOpened,a(this,h,Pe).call(this),this.isOpened?this.openCallback():this.closeCallback()},Ve=function({htmlTagsSection:e,htmlEditControl:t,htmlOperators:s}){const i=document.createElement("div");return i.classList.add("treeselect-input"),i.setAttribute("tabindex","-1"),i.addEventListener("mousedown",r=>a(this,h,Be).call(this,r)),i.addEventListener("focus",()=>this.focusCallback(),!0),e.appendChild(t),i.append(e,s),i},Be=function(e){e.stopPropagation(),this.isOpened||a(this,h,R).call(this),this.focus()},Ge=function(){const e=document.createElement("div");return e.classList.add("treeselect-input__tags"),e},Ue=function(){return this.value.map(e=>{const t=document.createElement("div");t.classList.add("treeselect-input__tags-element"),t.setAttribute("tabindex","-1"),t.setAttribute("tag-id",e.id.toString()),t.setAttribute("title",e.name);const s=a(this,h,Re).call(this,e.name),i=a(this,h,ze).call(this);return t.addEventListener("mousedown",r=>a(this,h,Me).call(this,r,e.id)),t.append(s,i),t})},Me=function(e,t){e.preventDefault(),e.stopPropagation(),this.removeItem(t),this.focus()},Re=function(e){const t=document.createElement("span");return t.classList.add("treeselect-input__tags-name"),t.textContent=e,t},ze=function(){const e=document.createElement("span");return e.classList.add("treeselect-input__tags-cross"),m(this.iconElements.cross,e),e},Fe=function(){const e=document.createElement("span");if(e.classList.add("treeselect-input__tags-count"),!this.value.length)return e.textContent="",e.setAttribute("title",""),e;const t=this.value.length===1?this.value[0].name:`${this.value.length} ${this.tagsCountText}`;return e.textContent=t,e.setAttribute("title",t),e},Ye=function(){const e=document.createElement("input");return e.classList.add("treeselect-input__edit"),this.id&&e.setAttribute("id",this.id),(!this.searchable||this.disabled)&&e.setAttribute("readonly","readonly"),this.disabled&&e.setAttribute("tabindex","-1"),this.ariaLabel.length&&e.setAttribute("aria-label",this.ariaLabel),e.addEventListener("keydown",t=>a(this,h,je).call(this,t)),e.addEventListener("input",t=>a(this,h,We).call(this,t,e)),e},je=function(e){e.stopPropagation();const t=e.key;t==="Backspace"&&!this.searchText.length&&this.value.length&&!this.showTags&&this.clear(),t==="Backspace"&&!this.searchText.length&&this.value.length&&this.removeItem(this.value[this.value.length-1].id),e.code==="Space"&&(!this.searchText||!this.searchable)&&a(this,h,R).call(this),(t==="Enter"||t==="ArrowDown"||t==="ArrowUp")&&e.preventDefault(),this.keydownCallback(e),t!=="Tab"&&this.focus()},We=function(e,t){e.stopPropagation();const s=this.searchText,i=t.value.trim();if(s.length===0&&i.length===0){t.value="";return}if(this.searchable){const r=e.target.value;this.searchCallback(r),this.isOpened||a(this,h,R).call(this)}else t.value="";this.searchText=t.value},Ke=function(){const e=document.createElement("div");return e.classList.add("treeselect-input__operators"),e},Ze=function(){const e=document.createElement("span");return e.classList.add("treeselect-input__clear"),e.setAttribute("tabindex","-1"),m(this.iconElements.clear,e),e.addEventListener("mousedown",t=>a(this,h,$e).call(this,t)),e},$e=function(e){e.preventDefault(),e.stopPropagation(),(this.searchText.length||this.value.length)&&this.clear(),this.focus()},qe=function(e){E(this,O,document.createElement("span")),n(this,O).classList.add("treeselect-input__arrow");const t=e?this.iconElements.arrowUp:this.iconElements.arrowDown;return m(t,n(this,O)),n(this,O).addEventListener("mousedown",s=>a(this,h,Xe).call(this,s)),n(this,O)},Xe=function(e){e.stopPropagation(),e.preventDefault(),this.focus(),a(this,h,R).call(this)},oe=function(){this.inputCallback(this.value)};const Le=({newValue:l,optionsTreeMap:e,isSingleSelect:t,isIndependentNodes:s})=>{Gt(e);const i=l.map(u=>e.get(u)??null).filter(u=>u!==null&&!u.disabled),[r]=i;if(t&&i.length&&r){r.checked=!0;return}i.forEach(u=>{u.checked=!0;const b=ie({option:u,optionsTreeMap:e,isIndependentNodes:s});u.checked=b})},ie=({option:{id:l,checked:e},optionsTreeMap:t,isIndependentNodes:s})=>{const i=t.get(l)??null;if(i===null)return!1;if(s)return i.checked=!i.disabled&&e,i.checked;const r=Se({checked:e,currentOption:i,optionsTreeMap:t});return ye({childOption:i,optionsTreeMap:t}),r},Se=({checked:l,currentOption:e,optionsTreeMap:t})=>{if(!e.isGroup)return e.checked=!e.disabled&&l,e.isPartialChecked=!1,e.checked;const s=j({id:e.id,optionsTreeMap:t});return!l||e.disabled||e.isPartialChecked?(e.checked=!1,e.isPartialChecked=!1,le({option:e,children:s,optionsTreeMap:t}),e.checked):xe({children:s,optionsTreeMap:t})?Ae(s)?(e.checked=!1,e.isPartialChecked=!1,e.disabled=!0,e.checked):(e.checked=!1,e.isPartialChecked=!0,s.forEach(b=>{Se({checked:l,currentOption:b,optionsTreeMap:t})}),e.checked):(e.checked=!0,e.isPartialChecked=!1,le({option:e,children:s,optionsTreeMap:t}),e.checked)},ye=({childOption:l,optionsTreeMap:e})=>{const t=e.get(l.childOf)??null;t!==null&&(Pt({parentOption:t,optionsTreeMap:e}),ye({childOption:t,optionsTreeMap:e}))},Pt=({parentOption:l,optionsTreeMap:e})=>{const t=j({id:l.id,optionsTreeMap:e});if(Ae(t)){l.checked=!1,l.isPartialChecked=!1,l.disabled=!0;return}if(Vt(t)){l.checked=!0,l.isPartialChecked=!1;return}if(Bt(t)){l.checked=!1,l.isPartialChecked=!0;return}l.checked=!1,l.isPartialChecked=!1},le=({option:{checked:l,disabled:e},children:t,optionsTreeMap:s})=>{t.forEach(i=>{i.disabled=e||i.disabled,i.checked=l&&!i.disabled,i.isPartialChecked=!1;const r=j({id:i.id,optionsTreeMap:s});le({option:{checked:l,disabled:e},children:r,optionsTreeMap:s})})},xe=({children:l,optionsTreeMap:e})=>l.some(s=>s.disabled)?!0:l.some(s=>{if(!s.isGroup)return!1;const i=j({id:s.id,optionsTreeMap:e});return xe({children:i,optionsTreeMap:e})}),Ae=l=>l.every(e=>!!e.disabled),Vt=l=>l.every(e=>e.checked),Bt=l=>l.some(e=>e.checked||e.isPartialChecked),Gt=l=>{l.forEach(e=>{e.checked=!1,e.isPartialChecked=!1})},Ut=({options:l,openLevel:e,isIndependentNodes:t})=>{const s={level:0,groupId:""},i=new Map;return Oe({optionsTreeMap:i,options:l,openLevel:e,groupId:s.groupId,level:s.level}),zt({optionsTreeMap:i,isIndependentNodes:t}),i},Oe=({optionsTreeMap:l,options:e,openLevel:t,groupId:s,level:i})=>{e.forEach(r=>{var w,S;const u=(((w=r.children)==null?void 0:w.length)??0)>0,b=i>=t&&u,L=i>t,y=((S=r.children)==null?void 0:S.map(x=>x.value))??[],k=r.value;l.has(k)&&console.error(`Validation: You have duplicated option value: ${k}! You should use unique values. Duplicates will lead to unexpected behavior.`),l.set(k,{id:k,name:r.name,childOf:s,isGroup:u,checked:!1,isPartialChecked:!1,level:i,isClosed:b,hidden:L,disabled:r.disabled??!1,isGroupSelectable:!u||(r.isGroupSelectable??!0),children:y,checkboxHtmlElement:null,itemHtmlElement:null,arrowItemHtmlElement:null,checkboxIconHtmlElement:null}),u&&Oe({optionsTreeMap:l,options:r.children,openLevel:t,groupId:k,level:i+1})})},Mt=(l,e)=>l===null?null:e.get(l)??e.get(parseInt(l))??null,j=({id:l,optionsTreeMap:e})=>{const t=e.get(l)??null;return t===null?[]:t.children.reduce((s,i)=>{const r=e.get(i)??null;return r!==null&&s.push(r),s},[])},Rt=l=>{const e=[],t=[],s=[];l.forEach(r=>{r.checked&&(s.push(r),r.isGroup?t.push(r):e.push(r))});const i=s.filter(r=>!t.some(({id:u})=>u===r.childOf));return{ungroupedNodes:e,groupedNodes:i,allNodes:s}},zt=({optionsTreeMap:l,isIndependentNodes:e})=>{const t=[];l.forEach(s=>{s.disabled&&t.push(s)}),t.forEach(({id:s})=>ie({option:{id:s,checked:!1},optionsTreeMap:l,isIndependentNodes:e}))},W=(l,{id:e,isClosed:t})=>{j({id:e,optionsTreeMap:l}).forEach(i=>{i.hidden=t??!1,i.isGroup&&!i.isClosed&&W(l,{id:i.id,isClosed:t})})},Ft={"Ⓐ":"A",Ａ:"A",À:"A",Á:"A",Â:"A",Ầ:"A",Ấ:"A",Ẫ:"A",Ẩ:"A",Ã:"A",Ā:"A",Ă:"A",Ằ:"A",Ắ:"A",Ẵ:"A",Ẳ:"A",Ȧ:"A",Ǡ:"A",Ä:"A",Ǟ:"A",Ả:"A",Å:"A",Ǻ:"A",Ǎ:"A",Ȁ:"A",Ȃ:"A",Ạ:"A",Ậ:"A",Ặ:"A",Ḁ:"A",Ą:"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B",Ｂ:"B",Ḃ:"B",Ḅ:"B",Ḇ:"B","Ƀ":"B",Ƃ:"B",Ɓ:"B","Ⓒ":"C",Ｃ:"C",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",Ç:"C",Ḉ:"C",Ƈ:"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D",Ｄ:"D",Ḋ:"D",Ď:"D",Ḍ:"D",Ḑ:"D",Ḓ:"D",Ḏ:"D",Đ:"D",Ƌ:"D",Ɗ:"D",Ɖ:"D","Ꝺ":"D",Ǳ:"DZ",Ǆ:"DZ",ǲ:"Dz",ǅ:"Dz","Ⓔ":"E",Ｅ:"E",È:"E",É:"E",Ê:"E",Ề:"E",Ế:"E",Ễ:"E",Ể:"E",Ẽ:"E",Ē:"E",Ḕ:"E",Ḗ:"E",Ĕ:"E",Ė:"E",Ë:"E",Ẻ:"E",Ě:"E",Ȅ:"E",Ȇ:"E",Ẹ:"E",Ệ:"E",Ȩ:"E",Ḝ:"E",Ę:"E",Ḙ:"E",Ḛ:"E",Ɛ:"E",Ǝ:"E","Ⓕ":"F",Ｆ:"F",Ḟ:"F",Ƒ:"F","Ꝼ":"F","Ⓖ":"G",Ｇ:"G",Ǵ:"G",Ĝ:"G",Ḡ:"G",Ğ:"G",Ġ:"G",Ǧ:"G",Ģ:"G",Ǥ:"G",Ɠ:"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H",Ｈ:"H",Ĥ:"H",Ḣ:"H",Ḧ:"H",Ȟ:"H",Ḥ:"H",Ḩ:"H",Ḫ:"H",Ħ:"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I",Ｉ:"I",Ì:"I",Í:"I",Î:"I",Ĩ:"I",Ī:"I",Ĭ:"I",İ:"I",Ï:"I",Ḯ:"I",Ỉ:"I",Ǐ:"I",Ȉ:"I",Ȋ:"I",Ị:"I",Į:"I",Ḭ:"I",Ɨ:"I","Ⓙ":"J",Ｊ:"J",Ĵ:"J","Ɉ":"J","Ⓚ":"K",Ｋ:"K",Ḱ:"K",Ǩ:"K",Ḳ:"K",Ķ:"K",Ḵ:"K",Ƙ:"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L",Ｌ:"L",Ŀ:"L",Ĺ:"L",Ľ:"L",Ḷ:"L",Ḹ:"L",Ļ:"L",Ḽ:"L",Ḻ:"L",Ł:"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L",Ǉ:"LJ",ǈ:"Lj","Ⓜ":"M",Ｍ:"M",Ḿ:"M",Ṁ:"M",Ṃ:"M","Ɱ":"M",Ɯ:"M","Ⓝ":"N",Ｎ:"N",Ǹ:"N",Ń:"N",Ñ:"N",Ṅ:"N",Ň:"N",Ṇ:"N",Ņ:"N",Ṋ:"N",Ṉ:"N","Ƞ":"N",Ɲ:"N","Ꞑ":"N","Ꞥ":"N",Ǌ:"NJ",ǋ:"Nj","Ⓞ":"O",Ｏ:"O",Ò:"O",Ó:"O",Ô:"O",Ồ:"O",Ố:"O",Ỗ:"O",Ổ:"O",Õ:"O",Ṍ:"O",Ȭ:"O",Ṏ:"O",Ō:"O",Ṑ:"O",Ṓ:"O",Ŏ:"O",Ȯ:"O",Ȱ:"O",Ö:"O",Ȫ:"O",Ỏ:"O",Ő:"O",Ǒ:"O",Ȍ:"O",Ȏ:"O",Ơ:"O",Ờ:"O",Ớ:"O",Ỡ:"O",Ở:"O",Ợ:"O",Ọ:"O",Ộ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Ɔ:"O",Ɵ:"O","Ꝋ":"O","Ꝍ":"O",Œ:"OE",Ƣ:"OI","Ꝏ":"OO",Ȣ:"OU","Ⓟ":"P",Ｐ:"P",Ṕ:"P",Ṗ:"P",Ƥ:"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q",Ｑ:"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R",Ｒ:"R",Ŕ:"R",Ṙ:"R",Ř:"R",Ȑ:"R",Ȓ:"R",Ṛ:"R",Ṝ:"R",Ŗ:"R",Ṟ:"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S",Ｓ:"S","ẞ":"S",Ś:"S",Ṥ:"S",Ŝ:"S",Ṡ:"S",Š:"S",Ṧ:"S",Ṣ:"S",Ṩ:"S",Ș:"S",Ş:"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T",Ｔ:"T",Ṫ:"T",Ť:"T",Ṭ:"T",Ț:"T",Ţ:"T",Ṱ:"T",Ṯ:"T",Ŧ:"T",Ƭ:"T",Ʈ:"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U",Ｕ:"U",Ù:"U",Ú:"U",Û:"U",Ũ:"U",Ṹ:"U",Ū:"U",Ṻ:"U",Ŭ:"U",Ü:"U",Ǜ:"U",Ǘ:"U",Ǖ:"U",Ǚ:"U",Ủ:"U",Ů:"U",Ű:"U",Ǔ:"U",Ȕ:"U",Ȗ:"U",Ư:"U",Ừ:"U",Ứ:"U",Ữ:"U",Ử:"U",Ự:"U",Ụ:"U",Ṳ:"U",Ų:"U",Ṷ:"U",Ṵ:"U","Ʉ":"U","Ⓥ":"V",Ｖ:"V",Ṽ:"V",Ṿ:"V",Ʋ:"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W",Ｗ:"W",Ẁ:"W",Ẃ:"W",Ŵ:"W",Ẇ:"W",Ẅ:"W",Ẉ:"W","Ⱳ":"W","Ⓧ":"X",Ｘ:"X",Ẋ:"X",Ẍ:"X","Ⓨ":"Y",Ｙ:"Y",Ỳ:"Y",Ý:"Y",Ŷ:"Y",Ỹ:"Y",Ȳ:"Y",Ẏ:"Y",Ÿ:"Y",Ỷ:"Y",Ỵ:"Y",Ƴ:"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z",Ｚ:"Z",Ź:"Z",Ẑ:"Z",Ż:"Z",Ž:"Z",Ẓ:"Z",Ẕ:"Z",Ƶ:"Z",Ȥ:"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a",ａ:"a",ẚ:"a",à:"a",á:"a",â:"a",ầ:"a",ấ:"a",ẫ:"a",ẩ:"a",ã:"a",ā:"a",ă:"a",ằ:"a",ắ:"a",ẵ:"a",ẳ:"a",ȧ:"a",ǡ:"a",ä:"a",ǟ:"a",ả:"a",å:"a",ǻ:"a",ǎ:"a",ȁ:"a",ȃ:"a",ạ:"a",ậ:"a",ặ:"a",ḁ:"a",ą:"a","ⱥ":"a",ɐ:"a","ꜳ":"aa",æ:"ae",ǽ:"ae",ǣ:"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b",ｂ:"b",ḃ:"b",ḅ:"b",ḇ:"b",ƀ:"b",ƃ:"b",ɓ:"b","ⓒ":"c",ｃ:"c",ć:"c",ĉ:"c",ċ:"c",č:"c",ç:"c",ḉ:"c",ƈ:"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d",ｄ:"d",ḋ:"d",ď:"d",ḍ:"d",ḑ:"d",ḓ:"d",ḏ:"d",đ:"d",ƌ:"d",ɖ:"d",ɗ:"d","ꝺ":"d",ǳ:"dz",ǆ:"dz","ⓔ":"e",ｅ:"e",è:"e",é:"e",ê:"e",ề:"e",ế:"e",ễ:"e",ể:"e",ẽ:"e",ē:"e",ḕ:"e",ḗ:"e",ĕ:"e",ė:"e",ë:"e",ẻ:"e",ě:"e",ȅ:"e",ȇ:"e",ẹ:"e",ệ:"e",ȩ:"e",ḝ:"e",ę:"e",ḙ:"e",ḛ:"e","ɇ":"e",ɛ:"e",ǝ:"e","ⓕ":"f",ｆ:"f",ḟ:"f",ƒ:"f","ꝼ":"f","ⓖ":"g",ｇ:"g",ǵ:"g",ĝ:"g",ḡ:"g",ğ:"g",ġ:"g",ǧ:"g",ģ:"g",ǥ:"g",ɠ:"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h",ｈ:"h",ĥ:"h",ḣ:"h",ḧ:"h",ȟ:"h",ḥ:"h",ḩ:"h",ḫ:"h",ẖ:"h",ħ:"h","ⱨ":"h","ⱶ":"h",ɥ:"h",ƕ:"hv","ⓘ":"i",ｉ:"i",ì:"i",í:"i",î:"i",ĩ:"i",ī:"i",ĭ:"i",ï:"i",ḯ:"i",ỉ:"i",ǐ:"i",ȉ:"i",ȋ:"i",ị:"i",į:"i",ḭ:"i",ɨ:"i",ı:"i","ⓙ":"j",ｊ:"j",ĵ:"j",ǰ:"j","ɉ":"j","ⓚ":"k",ｋ:"k",ḱ:"k",ǩ:"k",ḳ:"k",ķ:"k",ḵ:"k",ƙ:"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l",ｌ:"l",ŀ:"l",ĺ:"l",ľ:"l",ḷ:"l",ḹ:"l",ļ:"l",ḽ:"l",ḻ:"l",ſ:"l",ł:"l",ƚ:"l",ɫ:"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l",ǉ:"lj","ⓜ":"m",ｍ:"m",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ɯ:"m","ⓝ":"n",ｎ:"n",ǹ:"n",ń:"n",ñ:"n",ṅ:"n",ň:"n",ṇ:"n",ņ:"n",ṋ:"n",ṉ:"n",ƞ:"n",ɲ:"n",ŉ:"n","ꞑ":"n","ꞥ":"n",ǌ:"nj","ⓞ":"o",ｏ:"o",ò:"o",ó:"o",ô:"o",ồ:"o",ố:"o",ỗ:"o",ổ:"o",õ:"o",ṍ:"o",ȭ:"o",ṏ:"o",ō:"o",ṑ:"o",ṓ:"o",ŏ:"o",ȯ:"o",ȱ:"o",ö:"o",ȫ:"o",ỏ:"o",ő:"o",ǒ:"o",ȍ:"o",ȏ:"o",ơ:"o",ờ:"o",ớ:"o",ỡ:"o",ở:"o",ợ:"o",ọ:"o",ộ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",ɔ:"o","ꝋ":"o","ꝍ":"o",ɵ:"o",œ:"oe",ƣ:"oi",ȣ:"ou","ꝏ":"oo","ⓟ":"p",ｐ:"p",ṕ:"p",ṗ:"p",ƥ:"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q",ｑ:"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r",ｒ:"r",ŕ:"r",ṙ:"r",ř:"r",ȑ:"r",ȓ:"r",ṛ:"r",ṝ:"r",ŗ:"r",ṟ:"r","ɍ":"r",ɽ:"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s",ｓ:"s",ß:"s",ś:"s",ṥ:"s",ŝ:"s",ṡ:"s",š:"s",ṧ:"s",ṣ:"s",ṩ:"s",ș:"s",ş:"s","ȿ":"s","ꞩ":"s","ꞅ":"s",ẛ:"s","ⓣ":"t",ｔ:"t",ṫ:"t",ẗ:"t",ť:"t",ṭ:"t",ț:"t",ţ:"t",ṱ:"t",ṯ:"t",ŧ:"t",ƭ:"t",ʈ:"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u",ｕ:"u",ù:"u",ú:"u",û:"u",ũ:"u",ṹ:"u",ū:"u",ṻ:"u",ŭ:"u",ü:"u",ǜ:"u",ǘ:"u",ǖ:"u",ǚ:"u",ủ:"u",ů:"u",ű:"u",ǔ:"u",ȕ:"u",ȗ:"u",ư:"u",ừ:"u",ứ:"u",ữ:"u",ử:"u",ự:"u",ụ:"u",ṳ:"u",ų:"u",ṷ:"u",ṵ:"u",ʉ:"u","ⓥ":"v",ｖ:"v",ṽ:"v",ṿ:"v",ʋ:"v","ꝟ":"v",ʌ:"v","ꝡ":"vy","ⓦ":"w",ｗ:"w",ẁ:"w",ẃ:"w",ŵ:"w",ẇ:"w",ẅ:"w",ẘ:"w",ẉ:"w","ⱳ":"w","ⓧ":"x",ｘ:"x",ẋ:"x",ẍ:"x","ⓨ":"y",ｙ:"y",ỳ:"y",ý:"y",ŷ:"y",ỹ:"y",ȳ:"y",ẏ:"y",ÿ:"y",ỷ:"y",ẙ:"y",ỵ:"y",ƴ:"y","ɏ":"y","ỿ":"y","ⓩ":"z",ｚ:"z",ź:"z",ẑ:"z",ż:"z",ž:"z",ẓ:"z",ẕ:"z",ƶ:"z",ȥ:"z","ɀ":"z","ⱬ":"z","ꝣ":"z",Ά:"Α",Έ:"Ε",Ή:"Η",Ί:"Ι",Ϊ:"Ι",Ό:"Ο",Ύ:"Υ",Ϋ:"Υ",Ώ:"Ω",ά:"α",έ:"ε",ή:"η",ί:"ι",ϊ:"ι",ΐ:"ι",ό:"ο",ύ:"υ",ϋ:"υ",ΰ:"υ",ώ:"ω",ς:"σ","’":"'"},ne=l=>l.split("").map(e=>Ft[e]||e).join(""),Yt=(l,e)=>{if(e){jt(l);return}l.forEach(t=>{t.checked&&ae(t.childOf,l),t.isGroup&&!t.disabled&&(t.checked||t.isPartialChecked)&&(t.isClosed=!1,W(l,t))})},jt=l=>{let e=null;for(const[t,s]of l)if(s.checked&&!s.disabled){e=s;break}e&&(e.isGroup&&(e.isClosed=!1,W(l,e)),ae(e.childOf,l))},ae=(l,e)=>{const t=e.get(l)??null;t&&(t.isClosed=!1,W(e,t),ae(t.childOf,e))},Wt=(l,e)=>{l.forEach(t=>{const s=ne(t.name).toLowerCase().includes(ne(e).toLowerCase());s&&(t.isGroup&&(t.isClosed=!0),t.childOf&&Te(t.childOf,l)),t.hidden=!s})},Te=(l,e)=>{const t=e.get(l)??null;t&&(t.hidden=!1,t.isClosed=!1,Te(t.childOf,e))},Kt=({optionsTreeMap:l,beforeSearchStateMap:e})=>{l.forEach(t=>{const s=e.get(t.id);s&&(t.hidden=s.hidden,t.isClosed=s.isClosed)}),e.clear()},Zt=({optionsTreeMap:l,beforeSearchStateMap:e})=>{e.clear(),l.forEach(t=>{e.set(t.id,{hidden:t.hidden,isClosed:t.isClosed})})},$t=l=>new IntersectionObserver(e=>{e.forEach(t=>{t.target.classList.toggle("treeselect-list__item--scroll-not-visible",!t.isIntersecting)})},{root:l,threshold:.5}),qt=({optionsTreeMap:l,emptyListHtmlElement:e,iconElements:t,previousSingleSelectedValue:s,rtl:i})=>{l.forEach(r=>{const u=r.checkboxHtmlElement;u&&(u.checked=r.checked),es({option:r,previousSingleSelectedValue:s}),ts(r),ss(r),is({option:r,iconElements:t}),ls(r),Xt({option:r,optionsTreeMap:l,rtl:i}),ns({option:r,iconElements:t}),as(r)}),Jt({optionsTreeMap:l,emptyListHtmlElement:e})},Xt=({option:l,optionsTreeMap:e,rtl:t})=>{const s=l.level===0,i=20,r=5;let u="0";if(s){let L=!1;for(const[k,w]of e)if(w.isGroup&&w.level===l.level){L=!0;break}const y=!l.isGroup&&L?`${i}px`:`${r}px`;u=l.isGroup?"0":y}else u=l.isGroup?`${l.level*i}px`:`${l.level*i+i}px`;const b=l.itemHtmlElement;b&&(t?b.style.paddingRight=u:b.style.paddingLeft=u,b.setAttribute("level",l.level.toString()),b.setAttribute("group",l.isGroup.toString()))},Jt=({optionsTreeMap:l,emptyListHtmlElement:e})=>{let t=!1;for(const[s,i]of l)if(!i.hidden){t=!0;break}e==null||e.classList.toggle("treeselect-list__empty--hidden",t)},Qt=(l,e)=>{e&&Object.keys(e).forEach(t=>{const s=e[t];typeof s=="string"&&l.setAttribute(t,s)})},es=({option:l,previousSingleSelectedValue:e})=>{const t=l.itemHtmlElement;t==null||t.classList.toggle("treeselect-list__item--checked",l.checked);const s=Array.isArray(e)&&e[0]===l.id&&!l.disabled;t==null||t.classList.toggle("treeselect-list__item--single-selected",s)},ts=l=>{const e=l.itemHtmlElement;e==null||e.classList.toggle("treeselect-list__item--partial-checked",l.isPartialChecked)},ss=l=>{const e=l.itemHtmlElement;e==null||e.classList.toggle("treeselect-list__item--disabled",l.disabled)},is=({option:l,iconElements:e})=>{const t=l.arrowItemHtmlElement;if(l.isGroup&&t){const s=l.isClosed?e.arrowRight:e.arrowDown;m(s,t);const i=l.itemHtmlElement;i==null||i.classList.toggle("treeselect-list__item--closed",l.isClosed)}},ls=l=>{const e=l.itemHtmlElement;e==null||e.classList.toggle("treeselect-list__item--hidden",l.hidden)},ns=({option:l,iconElements:e})=>{const t=l.checkboxIconHtmlElement;t&&(l.checked?m(e.check,t):l.isPartialChecked?m(e.partialCheck,t):t.innerHTML="")},as=l=>{const e=l.itemHtmlElement;e==null||e.classList.toggle("treeselect-list__item--non-selectable-group",!l.isGroupSelectable)},rs=({newValue:l,optionsTreeMap:e,isSingleSelect:t,expandSelected:s,isFirstValueUpdate:i,isIndependentNodes:r})=>{Le({newValue:l,optionsTreeMap:e,isSingleSelect:t,isIndependentNodes:r}),i&&s&&Yt(e,t)};class os{constructor({options:e,value:t,openLevel:s,listSlotHtmlComponent:i,tagsSortFn:r,emptyText:u,isSingleSelect:b,iconElements:L,showCount:y,disabledBranchNode:k,expandSelected:w,isIndependentNodes:S,rtl:x,listClassName:H,isBoostedRendering:D,inputCallback:B,arrowClickCallback:$,mouseupCallback:Y,parentContainer:q}){C(this,c);o(this,"options");o(this,"value");o(this,"openLevel");o(this,"listSlotHtmlComponent");o(this,"tagsSortFn");o(this,"emptyText");o(this,"isSingleSelect");o(this,"showCount");o(this,"disabledBranchNode");o(this,"expandSelected");o(this,"isIndependentNodes");o(this,"rtl");o(this,"listClassName");o(this,"isBoostedRendering");o(this,"iconElements");o(this,"searchText");o(this,"intersectionItemsObserver");o(this,"selectedNodes");o(this,"optionsTreeMap");o(this,"beforeSearchStateMap");o(this,"emptyListHtmlElement");o(this,"srcElement");o(this,"parentContainer");o(this,"inputCallback");o(this,"arrowClickCallback");o(this,"mouseupCallback");C(this,U,null);C(this,P,!0);C(this,M,[]);C(this,K,!0);this.options=e,this.value=t,this.openLevel=s??0,this.listSlotHtmlComponent=i??null,this.tagsSortFn=r??null,this.emptyText=u??"No results found...",this.isSingleSelect=b??!1,this.showCount=y??!1,this.disabledBranchNode=k??!1,this.expandSelected=w??!1,this.isIndependentNodes=S??!1,this.rtl=x??!1,this.listClassName=H??"",this.isBoostedRendering=D,this.iconElements=L,this.searchText="",this.intersectionItemsObserver=null,this.selectedNodes={nodes:[],groupedNodes:[],allNodes:[]},this.optionsTreeMap=Ut({options:this.options,openLevel:this.openLevel,isIndependentNodes:this.isIndependentNodes}),this.beforeSearchStateMap=new Map,this.emptyListHtmlElement=null,this.srcElement=a(this,c,et).call(this),this.inputCallback=B,this.arrowClickCallback=$,this.mouseupCallback=Y,this.parentContainer=q}updateValue(e){this.value=e,E(this,M,this.isSingleSelect?this.value:[]),rs({newValue:e,optionsTreeMap:this.optionsTreeMap,isSingleSelect:this.isSingleSelect,expandSelected:this.expandSelected,isFirstValueUpdate:n(this,K),isIndependentNodes:this.isIndependentNodes}),a(this,c,Q).call(this),E(this,K,!1),a(this,c,me).call(this)}updateSearchValue(e){if(e===this.searchText)return;const t=this.searchText===""&&e!=="";this.searchText=ne(e).toLowerCase(),t&&Zt({beforeSearchStateMap:this.beforeSearchStateMap,optionsTreeMap:this.optionsTreeMap}),this.searchText===""&&Kt({beforeSearchStateMap:this.beforeSearchStateMap,optionsTreeMap:this.optionsTreeMap}),this.searchText&&Wt(this.optionsTreeMap,e),a(this,c,Q).call(this),this.focusFirstListElement()}callKeyAction(e){E(this,P,!1);const t=this.srcElement.querySelector(".treeselect-list__item--focused");if(t==null?void 0:t.classList.contains("treeselect-list__item--hidden"))return;const i=e.key;i==="Enter"&&t&&t.dispatchEvent(new Event("mousedown")),(i==="ArrowLeft"||i==="ArrowRight")&&a(this,c,Je).call(this,t,e),(i==="ArrowDown"||i==="ArrowUp")&&a(this,c,Qe).call(this,t,i)}focusFirstListElement(){const e="treeselect-list__item--focused",t=this.srcElement.querySelector(`.${e}`),s=a(this,c,de).call(this);if(!s.length)return;t&&t.classList.remove(e);const[i]=s;i.classList.add(e)}isLastFocusedElementExist(){return!!n(this,U)}destroy(){this.intersectionItemsObserver&&this.intersectionItemsObserver.disconnect()}}U=new WeakMap,P=new WeakMap,M=new WeakMap,K=new WeakMap,c=new WeakSet,Q=function(){var e;(e=this.parentContainer)==null||e.dispatchEvent(new CustomEvent("update-dom")),qt({optionsTreeMap:this.optionsTreeMap,emptyListHtmlElement:this.emptyListHtmlElement,iconElements:this.iconElements,previousSingleSelectedValue:n(this,M),rtl:this.rtl})},Je=function(e,t){if(!e)return;const s=t.key,r=e.querySelector(".treeselect-list__item-checkbox").getAttribute("input-id"),u=Mt(r,this.optionsTreeMap),b=u.arrowItemHtmlElement;s==="ArrowLeft"&&!u.isClosed&&u.isGroup&&(b.dispatchEvent(new Event("mousedown")),t.preventDefault()),s==="ArrowRight"&&u.isClosed&&u.isGroup&&(b.dispatchEvent(new Event("mousedown")),t.preventDefault())},Qe=function(e,t){var r;const s=a(this,c,de).call(this);if(!s.length)return;const i="treeselect-list__item--focused";if(e){const u=s.findIndex(D=>D.classList.contains(i));s[u].classList.remove(i);const L=t==="ArrowDown"?u+1:u-1,y=t==="ArrowDown"?0:s.length-1,k=!s[L],w=s[L]??s[y];w.classList.add(i);const S=this.srcElement.getBoundingClientRect(),x=w.getBoundingClientRect();if(k&&t==="ArrowDown"){this.srcElement.scroll(0,0);return}if(k&&t==="ArrowUp"){this.srcElement.scroll(0,this.srcElement.scrollHeight);return}const H=((r=this.listSlotHtmlComponent)==null?void 0:r.clientHeight)??0;if(S.y+S.height<x.y+x.height+H){this.srcElement.scroll(0,this.srcElement.scrollTop+x.height);return}if(S.y>x.y){this.srcElement.scroll(0,this.srcElement.scrollTop-x.height);return}}else{const[u]=s;u.classList.add(i)}},et=function(){const e=a(this,c,tt).call(this),t=a(this,c,ce).call(this,this.options);e.append(...t);const s=a(this,c,nt).call(this);e.append(s);const i=a(this,c,lt).call(this);return i&&e.append(i),e},tt=function(){const e=document.createElement("div");return e.classList.add("treeselect-list"),this.listClassName.length>0&&e.classList.add(this.listClassName),this.isSingleSelect&&e.classList.add("treeselect-list--single-select"),this.disabledBranchNode&&e.classList.add("treeselect-list--disabled-branch-node"),e.addEventListener("mouseout",t=>a(this,c,st).call(this,t)),e.addEventListener("mousemove",()=>a(this,c,it).call(this)),e.addEventListener("mouseup",()=>this.mouseupCallback(),!0),this.isBoostedRendering&&(this.intersectionItemsObserver=$t(e)),e},st=function(e){e.stopPropagation(),n(this,U)&&n(this,P)&&n(this,U).classList.add("treeselect-list__item--focused")},it=function(){E(this,P,!0)},ce=function(e){return e.reduce((t,s)=>{var r;if((r=s.children)!=null&&r.length){const u=a(this,c,at).call(this,s),b=a(this,c,ce).call(this,s.children);return u.append(...b),t.push(u),t}const i=a(this,c,he).call(this,s,!1);return t.push(i),t},[])},lt=function(){if(!this.listSlotHtmlComponent)return null;const e=document.createElement("div");return e.classList.add("treeselect-list__slot"),e.appendChild(this.listSlotHtmlComponent),e},nt=function(){const e=document.createElement("div");e.classList.add("treeselect-list__empty"),e.setAttribute("title",this.emptyText);const t=document.createElement("span");t.classList.add("treeselect-list__empty-icon"),m(this.iconElements.attention,t);const s=document.createElement("span");return s.classList.add("treeselect-list__empty-text"),s.textContent=this.emptyText,e.append(t,s),this.emptyListHtmlElement=e,e},at=function(e){const t=document.createElement("div");t.setAttribute("group-container-id",e.value.toString()),t.classList.add("treeselect-list__group-container");const s=a(this,c,he).call(this,e,!0);return t.appendChild(s),t},he=function(e,t){const s=a(this,c,rt).call(this,e);if(t){const u=a(this,c,dt).call(this,e);s.appendChild(u),s.classList.add("treeselect-list__item--group")}const i=a(this,c,mt).call(this,e),r=a(this,c,pt).call(this,e,t);return s.append(i,r),s},rt=function(e){const t=document.createElement("div");t.setAttribute("tabindex","-1"),t.setAttribute("title",e.name),Qt(t,e.htmlAttr),t.classList.add("treeselect-list__item"),t.addEventListener("mouseover",()=>a(this,c,ot).call(this,t),!0),t.addEventListener("mouseout",()=>a(this,c,ct).call(this,t),!0),t.addEventListener("mousedown",i=>a(this,c,ht).call(this,i,e)),this.intersectionItemsObserver&&this.intersectionItemsObserver.observe(t);const s=this.optionsTreeMap.get(e.value);return s&&(s.itemHtmlElement=t),t},ot=function(e){n(this,P)&&a(this,c,ue).call(this,!0,e)},ct=function(e){n(this,P)&&(a(this,c,ue).call(this,!1,e),E(this,U,e))},ht=function(e,t){e.preventDefault(),e.stopPropagation();const s=this.optionsTreeMap.get(t.value)??null;if(s!=null&&s.disabled)return;const i=s==null?void 0:s.checkboxHtmlElement;i&&(i.checked=!i.checked,a(this,c,gt).call(this,i,t))},dt=function(e){const t=document.createElement("span");t.setAttribute("tabindex","-1"),t.classList.add("treeselect-list__item-icon"),m(this.iconElements.arrowDown,t),t.addEventListener("mousedown",i=>a(this,c,ut).call(this,i,e));const s=this.optionsTreeMap.get(e.value);return s&&(s.arrowItemHtmlElement=t),t},ut=function(e,t){e.preventDefault(),e.stopPropagation(),a(this,c,bt).call(this,t)},mt=function(e){const t=document.createElement("div");t.classList.add("treeselect-list__item-checkbox-container");const s=document.createElement("span");s.classList.add("treeselect-list__item-checkbox-icon"),s.innerHTML="";const i=document.createElement("input");i.setAttribute("tabindex","-1"),i.setAttribute("type","checkbox"),i.setAttribute("input-id",e.value.toString()),i.classList.add("treeselect-list__item-checkbox"),t.append(s,i);const r=this.optionsTreeMap.get(e.value);return r&&(r.checkboxHtmlElement=i,r.checkboxIconHtmlElement=s),t},pt=function(e,t){const s=document.createElement("label");if(s.textContent=e.name,s.classList.add("treeselect-list__item-label"),t&&this.showCount){const i=a(this,c,ft).call(this,e);s.appendChild(i)}return s},ft=function(e){var i;const t=document.createElement("span"),s=((i=this.optionsTreeMap.get(e.value))==null?void 0:i.children)??[];return t.textContent=`(${s.length})`,t.classList.add("treeselect-list__item-label-counter"),t},de=function(){const e=[];return this.optionsTreeMap.forEach(t=>{!t.hidden&&t.itemHtmlElement&&e.push(t.itemHtmlElement)}),e},gt=function(e,t){const s=this.optionsTreeMap.get(t.value)??null;if(s===null)return;const i=s.isGroupSelectable??!0;if(s.isGroup&&(this.disabledBranchNode||!i)){const r=s.arrowItemHtmlElement;r==null||r.dispatchEvent(new Event("mousedown"));return}if(this.isSingleSelect){const[r]=n(this,M);if(s.id===r)return;E(this,M,[s.id]),Le({newValue:[s.id],optionsTreeMap:this.optionsTreeMap,isSingleSelect:this.isSingleSelect,isIndependentNodes:this.isIndependentNodes})}else{s.checked=e.checked;const r=ie({option:s,optionsTreeMap:this.optionsTreeMap,isIndependentNodes:this.isIndependentNodes});e.checked=r}a(this,c,Q).call(this),a(this,c,Ct).call(this)},bt=function(e){const t=this.optionsTreeMap.get(e.value)??null;t!==null&&(t.isClosed=!t.isClosed,W(this.optionsTreeMap,t),a(this,c,Q).call(this),this.arrowClickCallback(t.id,t.isClosed))},ue=function(e,t){const s="treeselect-list__item--focused";if(e){const i=Array.from(this.srcElement.querySelectorAll(`.${s}`));i.length&&i.forEach(r=>r.classList.remove(s)),t.classList.add(s)}else t.classList.remove(s)},se=function(e){return this.tagsSortFn===null?e:[...e].sort((t,s)=>this.tagsSortFn({value:t.id,name:t.name},{value:s.id,name:s.name}))},me=function(){const{ungroupedNodes:e,groupedNodes:t,allNodes:s}=Rt(this.optionsTreeMap);this.selectedNodes={nodes:a(this,c,se).call(this,e),groupedNodes:a(this,c,se).call(this,t),allNodes:a(this,c,se).call(this,s)}},Ct=function(){a(this,c,me).call(this),this.inputCallback(this.selectedNodes),this.value=this.selectedNodes.nodes.map(e=>e.id)};const Ie=({parentHtmlContainer:l,staticList:e,appendToBody:t,isSingleSelect:s,value:i,direction:r})=>{l||console.error("Validation: parentHtmlContainer prop is required!"),e&&t&&console.error("Validation: You should set staticList to false if you use appendToBody!"),s&&Array.isArray(i)&&console.error("Validation: if you use isSingleSelect prop, you should pass a single value!"),!s&&!Array.isArray(i)&&console.error("Validation: you should pass an array as a value!"),r&&r!=="auto"&&r!=="bottom"&&r!=="top"&&console.error("Validation: you should pass (auto | top | bottom | undefined) as a value for the direction prop!")},te=l=>l.map(e=>e.id),cs=l=>l==null?[]:Array.isArray(l)?l:[l],hs=(l,e)=>{if(e){const[t]=l;return t??null}return l};class ds{constructor({parentHtmlContainer:e,value:t,options:s,openLevel:i,appendToBody:r,alwaysOpen:u,showTags:b,tagsCountText:L,tagsSortFn:y,clearable:k,searchable:w,placeholder:S,grouped:x,isGroupedValue:H,listSlotHtmlComponent:D,disabled:B,emptyText:$,staticList:Y,id:q,ariaLabel:us,isSingleSelect:Ne,showCount:ms,disabledBranchNode:ps,direction:fs,expandSelected:gs,saveScrollPosition:bs,isIndependentNodes:Cs,rtl:Es,listClassName:vs,isBoostedRendering:ws,iconElements:ks,inputCallback:Ls,openCallback:Ss,closeCallback:ys,nameChangeCallback:xs,searchCallback:As,openCloseGroupCallback:Os}){C(this,d);o(this,"parentHtmlContainer");o(this,"value");o(this,"options");o(this,"openLevel");o(this,"appendToBody");o(this,"alwaysOpen");o(this,"showTags");o(this,"tagsCountText");o(this,"tagsSortFn");o(this,"clearable");o(this,"searchable");o(this,"placeholder");o(this,"grouped");o(this,"isGroupedValue");o(this,"listSlotHtmlComponent");o(this,"disabled");o(this,"emptyText");o(this,"staticList");o(this,"id");o(this,"ariaLabel");o(this,"isSingleSelect");o(this,"showCount");o(this,"disabledBranchNode");o(this,"direction");o(this,"expandSelected");o(this,"saveScrollPosition");o(this,"isIndependentNodes");o(this,"rtl");o(this,"listClassName");o(this,"isBoostedRendering");o(this,"iconElements");o(this,"inputCallback");o(this,"openCallback");o(this,"closeCallback");o(this,"nameChangeCallback");o(this,"searchCallback");o(this,"openCloseGroupCallback");o(this,"ungroupedValue");o(this,"groupedValue");o(this,"allValue");o(this,"isListOpened");o(this,"selectedName");o(this,"srcElement");C(this,p,null);C(this,g,null);C(this,z,null);C(this,Z,0);C(this,F,0);C(this,I,null);C(this,N,null);C(this,T,null);C(this,V,null);Ie({parentHtmlContainer:e,value:t,staticList:Y,appendToBody:r,isSingleSelect:Ne}),this.parentHtmlContainer=e,this.value=[],this.options=s??[],this.openLevel=i??0,this.appendToBody=r??!1,this.alwaysOpen=!!(u&&!B),this.showTags=b??!0,this.tagsCountText=L??"elements selected",this.tagsSortFn=y??null,this.clearable=k??!0,this.searchable=w??!0,this.placeholder=S??"Search...",this.grouped=x??!0,this.isGroupedValue=H??!1,this.listSlotHtmlComponent=D??null,this.disabled=B??!1,this.emptyText=$??"No results found...",this.staticList=!!(Y&&!this.appendToBody),this.id=q??"",this.ariaLabel=us??"",this.isSingleSelect=Ne??!1,this.showCount=ms??!1,this.disabledBranchNode=ps??!1,this.direction=fs??"auto",this.expandSelected=gs??!1,this.saveScrollPosition=bs??!0,this.isIndependentNodes=Cs??!1,this.rtl=Es??!1,this.listClassName=vs??"",this.isBoostedRendering=ws??!1,this.iconElements=v(ks),this.inputCallback=Ls,this.openCallback=Ss,this.closeCallback=ys,this.nameChangeCallback=xs,this.searchCallback=As,this.openCloseGroupCallback=Os,this.ungroupedValue=[],this.groupedValue=[],this.allValue=[],this.isListOpened=!1,this.selectedName="",this.srcElement=null,a(this,d,pe).call(this,t)}mount(){Ie({parentHtmlContainer:this.parentHtmlContainer,value:this.value,staticList:this.staticList,appendToBody:this.appendToBody,isSingleSelect:this.isSingleSelect}),this.iconElements=v(this.iconElements),a(this,d,pe).call(this,this.value)}updateValue(e){const t=cs(e),s=n(this,p);s&&(s.updateValue(t),a(this,d,ge).call(this,s==null?void 0:s.selectedNodes))}destroy(){var e;this.srcElement&&(a(this,d,be).call(this),this.srcElement.innerHTML="",this.srcElement=null,a(this,d,we).call(this,!0),(e=n(this,p))==null||e.destroy())}focus(){n(this,g)&&n(this,g).focus()}toggleOpenClose(){n(this,g)&&(n(this,g).openClose(),n(this,g).focus())}scrollWindowHandler(){this.updateListPosition()}focusWindowHandler(e){var s,i;if(e.target instanceof HTMLDialogElement&&e.type==="focus")return;((s=this.srcElement)==null?void 0:s.contains(e.target))||((i=n(this,p))==null?void 0:i.srcElement.contains(e.target))||this.blurWindowHandler()}blurWindowHandler(){var e;(e=n(this,g))==null||e.blur(),a(this,d,we).call(this,!1),a(this,d,Ee).call(this,!1)}updateListPosition(){var H;const e=this.srcElement,t=(H=n(this,p))==null?void 0:H.srcElement;if(!e||!t)return;if(this.staticList){t.setAttribute("direction","bottom"),a(this,d,Ce).call(this,!1,this.appendToBody);return}const{height:s}=t.getBoundingClientRect(),{x:i,y:r,height:u,width:b}=e.getBoundingClientRect(),L=window.innerHeight,y=r,k=L-r-u;let w=y>k&&y>=s&&k<s;if(this.direction!=="auto"&&(w=this.direction==="top"),this.appendToBody){(t.style.top!=="0px"||t.style.left!=="0px")&&(t.style.top="0px",t.style.left="0px");const D=i+window.scrollX,B=w?r+window.scrollY-s:r+window.scrollY+u;t.style.transform=`translate(${D}px,${B}px)`,t.style.width=`${b}px`}const S=w?"top":"bottom";t.getAttribute("direction")!==S&&(t.setAttribute("direction",S),a(this,d,Ce).call(this,w,this.appendToBody))}}return p=new WeakMap,g=new WeakMap,z=new WeakMap,Z=new WeakMap,F=new WeakMap,I=new WeakMap,N=new WeakMap,T=new WeakMap,V=new WeakMap,d=new WeakSet,pe=function(e){var r;this.destroy();const{container:t,list:s,input:i}=a(this,d,Et).call(this);this.srcElement=t,E(this,p,s),E(this,g,i),E(this,I,this.scrollWindowHandler.bind(this)),E(this,N,this.scrollWindowHandler.bind(this)),E(this,T,this.focusWindowHandler.bind(this)),E(this,V,this.blurWindowHandler.bind(this)),this.alwaysOpen&&((r=n(this,g))==null||r.openClose()),this.disabled?this.srcElement.classList.add("treeselect--disabled"):this.srcElement.classList.remove("treeselect--disabled"),this.updateValue(e??this.value)},fe=function({groupedNodes:e,nodes:t,allNodes:s}){this.ungroupedValue=t?te(t):[],this.groupedValue=e?te(e):[],this.allValue=s?te(s):[];let i=[];this.isIndependentNodes||this.isSingleSelect?i=this.allValue:this.isGroupedValue?i=this.groupedValue:i=this.ungroupedValue,this.value=hs(i,this.isSingleSelect)},Et=function(){const e=this.parentHtmlContainer;e.classList.add("treeselect");const t=new os({value:[],options:this.options,openLevel:this.openLevel,listSlotHtmlComponent:this.listSlotHtmlComponent,tagsSortFn:this.tagsSortFn,emptyText:this.emptyText,isSingleSelect:this.isSingleSelect,showCount:this.showCount,disabledBranchNode:this.disabledBranchNode,expandSelected:this.expandSelected,isIndependentNodes:this.isIndependentNodes,rtl:this.rtl,listClassName:this.listClassName,isBoostedRendering:this.isBoostedRendering,iconElements:this.iconElements,inputCallback:i=>a(this,d,St).call(this,i),arrowClickCallback:(i,r)=>a(this,d,yt).call(this,i,r),mouseupCallback:()=>{var i;return(i=n(this,g))==null?void 0:i.focus()},parentContainer:e}),s=new Dt({value:[],showTags:this.showTags,tagsCountText:this.tagsCountText,clearable:this.clearable,isAlwaysOpened:this.alwaysOpen,searchable:this.searchable,placeholder:this.placeholder,disabled:this.disabled,isSingleSelect:this.isSingleSelect,id:this.id,ariaLabel:this.ariaLabel,iconElements:this.iconElements,inputCallback:i=>a(this,d,vt).call(this,i),searchCallback:i=>a(this,d,kt).call(this,i),openCallback:()=>a(this,d,At).call(this),closeCallback:()=>a(this,d,be).call(this),keydownCallback:i=>a(this,d,wt).call(this,i),focusCallback:()=>a(this,d,Lt).call(this),nameChangeCallback:i=>a(this,d,xt).call(this,i)});return this.rtl&&(e.setAttribute("dir","rtl"),t.srcElement.setAttribute("dir","rtl")),this.appendToBody&&E(this,z,new ResizeObserver(()=>this.updateListPosition())),e.append(s.srcElement),{container:e,list:t,input:s}},vt=function(e){var i,r;const t=te(e);(i=n(this,p))==null||i.updateValue(t);const s=((r=n(this,p))==null?void 0:r.selectedNodes)??{};a(this,d,fe).call(this,s),a(this,d,ke).call(this)},wt=function(e){var t;this.isListOpened&&((t=n(this,p))==null||t.callKeyAction(e))},kt=function(e){n(this,F)&&clearTimeout(n(this,F)),E(this,F,window.setTimeout(()=>{var t;(t=n(this,p))==null||t.updateSearchValue(e),this.updateListPosition()},350)),a(this,d,Ht).call(this,e)},Lt=function(){a(this,d,Ee).call(this,!0),n(this,T)&&n(this,T)&&n(this,V)&&(document.addEventListener("mousedown",n(this,T),!0),document.addEventListener("focus",n(this,T),!0),window.addEventListener("blur",n(this,V),{capture:!1}))},ge=function(e){var s;if(!e)return;let t=[];this.isIndependentNodes||this.isSingleSelect?t=e.allNodes:this.grouped?t=e.groupedNodes:t=e.nodes,(s=n(this,g))==null||s.updateValue(t),a(this,d,fe).call(this,e)},St=function(e){var t,s,i;a(this,d,ge).call(this,e),this.isSingleSelect&&!this.alwaysOpen&&((t=n(this,g))==null||t.openClose(),(s=n(this,g))==null||s.clearSearch()),(i=n(this,g))==null||i.focus(),a(this,d,ke).call(this)},yt=function(e,t){var s;(s=n(this,g))==null||s.focus(),this.updateListPosition(),a(this,d,_t).call(this,e,t)},xt=function(e){this.selectedName!==e&&(this.selectedName=e,a(this,d,Tt).call(this))},At=function(){var e;this.isListOpened=!0,n(this,I)&&n(this,N)&&(window.addEventListener("scroll",n(this,I),!0),window.addEventListener("resize",n(this,N))),!(!n(this,p)||!this.srcElement)&&(this.appendToBody?(document.body.appendChild(n(this,p).srcElement),(e=n(this,z))==null||e.observe(this.srcElement)):this.srcElement.appendChild(n(this,p).srcElement),this.updateListPosition(),a(this,d,ve).call(this,!0),a(this,d,Ot).call(this),a(this,d,It).call(this))},be=function(){var t;this.alwaysOpen||(this.isListOpened=!1,n(this,I)&&n(this,N)&&(window.removeEventListener("scroll",n(this,I),!0),window.removeEventListener("resize",n(this,N))),!n(this,p)||!this.srcElement)||!(this.appendToBody?document.body.contains(n(this,p).srcElement):this.srcElement.contains(n(this,p).srcElement))||(E(this,Z,n(this,p).srcElement.scrollTop),this.appendToBody?(document.body.removeChild(n(this,p).srcElement),(t=n(this,z))==null||t.disconnect()):this.srcElement.removeChild(n(this,p).srcElement),a(this,d,ve).call(this,!1),a(this,d,Nt).call(this))},Ce=function(e,t){if(!n(this,p)||!n(this,g))return;const s=t?"treeselect-list--top-to-body":"treeselect-list--top",i=t?"treeselect-list--bottom-to-body":"treeselect-list--bottom";e?(n(this,p).srcElement.classList.add(s),n(this,p).srcElement.classList.remove(i),n(this,g).srcElement.classList.add("treeselect-input--top"),n(this,g).srcElement.classList.remove("treeselect-input--bottom")):(n(this,p).srcElement.classList.remove(s),n(this,p).srcElement.classList.add(i),n(this,g).srcElement.classList.remove("treeselect-input--top"),n(this,g).srcElement.classList.add("treeselect-input--bottom"))},Ee=function(e){!n(this,g)||!n(this,p)||(e?(n(this,g).srcElement.classList.add("treeselect-input--focused"),n(this,p).srcElement.classList.add("treeselect-list--focused")):(n(this,g).srcElement.classList.remove("treeselect-input--focused"),n(this,p).srcElement.classList.remove("treeselect-list--focused")))},ve=function(e){var t,s,i,r;e?(t=n(this,g))==null||t.srcElement.classList.add("treeselect-input--opened"):(s=n(this,g))==null||s.srcElement.classList.remove("treeselect-input--opened"),this.staticList?(i=n(this,p))==null||i.srcElement.classList.add("treeselect-list--static"):(r=n(this,p))==null||r.srcElement.classList.remove("treeselect-list--static")},we=function(e){!n(this,I)||!n(this,N)||!n(this,T)||!n(this,V)||((!this.alwaysOpen||e)&&(window.removeEventListener("scroll",n(this,I),!0),window.removeEventListener("resize",n(this,N))),document.removeEventListener("mousedown",n(this,T),!0),document.removeEventListener("focus",n(this,T),!0),window.removeEventListener("blur",n(this,V),{capture:!1}))},Ot=function(){var t,s,i;const e=(t=n(this,p))==null?void 0:t.isLastFocusedElementExist();this.saveScrollPosition&&e?(s=n(this,p))==null||s.srcElement.scroll(0,n(this,Z)):(i=n(this,p))==null||i.focusFirstListElement()},ke=function(){var e;(e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("input",{detail:this.value})),this.inputCallback&&this.inputCallback(this.value)},Tt=function(){var e;(e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("name-change",{detail:this.selectedName})),this.nameChangeCallback&&this.nameChangeCallback(this.selectedName)},It=function(){var e;this.alwaysOpen||((e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("open",{detail:this.value})),this.openCallback&&this.openCallback(this.value))},Nt=function(){var e;this.alwaysOpen||((e=this.srcElement)==null||e.dispatchEvent(new CustomEvent("close",{detail:this.value})),this.closeCallback&&this.closeCallback(this.value))},Ht=function(e){var s;const t=(e==null?void 0:e.trim())??"";(s=this.srcElement)==null||s.dispatchEvent(new CustomEvent("search",{detail:t})),this.searchCallback&&this.searchCallback(t)},_t=function(e,t){var s;(s=this.srcElement)==null||s.dispatchEvent(new CustomEvent("open-close-group",{detail:{groupId:e,isClosed:t}})),this.openCloseGroupCallback&&this.openCloseGroupCallback(e,t)},ds});

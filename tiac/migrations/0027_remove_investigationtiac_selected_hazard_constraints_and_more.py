# Generated by Django 5.2.7 on 2025-10-23 11:45

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("core", "0038_alter_document_document_type"),
        ("tiac", "0026_alter_investigationtiac_selected_hazard"),
    ]

    operations = [
        migrations.RemoveConstraint(
            model_name="investigationtiac",
            name="selected_hazard_constraints",
        ),
        migrations.AddConstraint(
            model_name="investigationtiac",
            constraint=models.CheckConstraint(
                condition=models.Q(
                    models.Q(
                        (
                            "selected_hazard__contained_by",
                            [
                                "Allergène - Arachide",
                                "Allergène - Céleri",
                                "Allergène - Crustacés",
                                "Allergène - Fruits à coques",
                                "Amande",
                                "Autre fruit à coque ou indéterminé",
                                "Noisette",
                                "Noix",
                                "Noix de cajou",
                                "Noix de Macadamia",
                                "Noix de Pécan",
                                "Noix du Brésil",
                                "Noix du Queensland",
                                "Pistache",
                                "Allergène - Gluten",
                                "Allergène - Lait",
                                "Allergène - Lupin",
                                "Allergène - Mollusques",
                                "Allergène - Moutarde",
                                "Allergène - Oeufs",
                                "Allergène - Poisson",
                                "Allergène - Sésame",
                                "Allergène - Soja",
                                "Allergène - Sulfites",
                                "Autre allergène ou indéterminé",
                                "Autre bactérie ou indéterminée",
                                "Bacillus",
                                "Bacillus anthracis",
                                "Bacillus cereus",
                                "Bacillus thurigiensis",
                                "Brucella",
                                "Brucella abortus",
                                "Brucella melitensis",
                                "Brucella suis",
                                "Campylobacter",
                                "Campylobacter coli",
                                "Campylobacter jejuni",
                                "Clostridium",
                                "Clostridium botulinum",
                                "Clostridium perfringens",
                                "Coliformes",
                                "Coxiella",
                                "Coxiella burnetii (fièvre Q)",
                                "Cronobacter",
                                "Cronobacter malonaticus",
                                "Cronobacter sakazakii",
                                "Entérobactéries",
                                "Escherichia Coli",
                                "Escherichia coli (non STEC - EHEC)",
                                "Escherichia coli shigatoxinogène (STEC - EHEC)",
                                "Leptospira",
                                "Listeria",
                                "Listeria monocytogenes",
                                "Mycobacterium",
                                "Mycobacterium bovis",
                                "Mycobacterium suis",
                                "Mycobacterium tuberculosis",
                                "Pseudomonas",
                                "Salmonella",
                                "Autre salmonella (à préciser)",
                                "Salmonella dublin",
                                "Salmonella enteritidis",
                                "Salmonella hadar",
                                "Salmonella infantis",
                                "Salmonella kentucky",
                                "Salmonella mbandaka",
                                "Salmonella typhimurium",
                                "Salmonella virchow",
                                "Shigella",
                                "Staphylococcus",
                                "Staphylococcus aureus et/ou sa toxine",
                                "Vibrio",
                                "Vibrio cholerae",
                                "Vibrio parahaemolyticus",
                                "Vibrio vulnificus",
                                "Yersinia",
                                "Yersinia enterocolitica",
                                "Autre contaminant de l'environnement",
                                "Bisphénol (hors MCDA)",
                                "Mélamine (hors MCDA)",
                                "Nitrate (hors additif)",
                                "Nitrite (hors additif)",
                                "Perchlorate",
                                "Arsenic (As)",
                                "Autre élément trace métallique ou composé inorganique",
                                "Cadmium (Cd)",
                                "Fluor (F)",
                                "Mercure (Hg)",
                                "Nickel (Ni)",
                                "Plomb (Pb)",
                                "Aflatoxine",
                                "Alternariol (AOH) Alternariol monométhyl éther (AME) Acide ténuazonique (TeA)",
                                "Autre mycotoxine ou indéterminée",
                                "Citrinine",
                                "Déoxynivalénol (DON)",
                                "Fumonisine",
                                "Ochratoxine A",
                                "Patuline",
                                "Sclérote d'ergot - Alcaloïde de l'ergot",
                                "Toxine T2 ou HT2",
                                "Zéaralénone (ZEA)",
                                "Autre polluant organique persistant",
                                "Dioxines et  PCB",
                                "PBDE et autre retardateur de flamme bromé",
                                "Substances perfluoroalkylées (PFAS)",
                                "3MCPD et ester d'acide gras de 3-MCPD",
                                "AAH",
                                "Acrylamide",
                                "Autre contaminant des procédés",
                                "Ester d'acide gras de glycidol",
                                "Furane et dérivé méthylé du furane",
                                "HAP",
                                "Hydrocarbure d'huile minérale (MOAH et MOSH)",
                                "Nitrosamine",
                                "Phycotoxine et cyanotoxine",
                                "Autre phycotoxine et cyanotoxine",
                                "Ciguatoxine",
                                "Histamine",
                                "Toxine ASP",
                                "Toxine DSP (toxines lipophiles)",
                                "Toxine PSP",
                                "Phyto-estrogène",
                                "Toxine végétale autre",
                                "Autre toxine végétale ou plante en contenant",
                                "Betterave crue : toxine indéterminée",
                                "Champignon toxique ou vénéneu(amanite, divers)",
                                "Cucurbitacine et autres toxines de courges",
                                "Gossypol",
                                "Pignon de pin amer (dysgueusie)",
                                "Théobromine",
                                "Toxine végétale réglementée",
                                "Acide cyanhydrique",
                                "Acide érucique",
                                "Alcaloïde opioïde",
                                "Alcaloïde pyrrolizidinique",
                                "Alcaloïde tropanique (Datura) et graine de Datura",
                                "Delta-9-THC (<=0,3%)",
                                "Glycoalcaloïde",
                                "Autre corps étranger ou indéterminé",
                                "Impureté botanique - espèce végétale nuisible (yc Ambroisie)",
                                "Insecte - vers - rongeur - autre animal indésirable",
                                "Verre - cailloux - métal - os - autre blessant",
                                "Activité interdite (mesure administrative)",
                                "Activité non agréée (défaut d'agrément)",
                                "Autre activité non autorisée",
                                "Irradiation Ionisation non autorisée",
                                'Non présentation à un contrôle obligatoire (yc "tout droit")',
                                "Anomalie documentaire sous-produit animal (DAC, DOCOM, CS)",
                                "Autre perte de maîtrise sanitaire",
                                "Défaut de composition (sauf allergène)",
                                "Défaut de pasteurisation",
                                "Défaut de stérilisation",
                                "Défaut de traçabilité",
                                "Défaut du conditionnement (herméticité, gaz…)",
                                "Défaut organoleptique (toute cause)",
                                "Feed - animal non-cible (contamination)",
                                "Ionisation non conforme (hors étiquetage)",
                                "Mauvaises conditions d'hygiène, risques de contamination",
                                "Rupture de la chaîne du froid",
                                "Autre étiquetage ou indéterminé (hors allergène)",
                                "Etiquetage / allégation",
                                "Etiquetage / composition (hors allergène)",
                                "Etiquetage / DLC",
                                "Etiquetage / ionisation",
                                "Etiquetage / mode d'emploi / mention de bon usage",
                                "Etiquetage / température de conservation",
                                "Additif",
                                "Additif - nitré (nitrate/nitrite)",
                                "Additif - non-respect catégorie denrée / AMM",
                                "Additif - non-respect dosage / AMM",
                                "Additif - sulfite",
                                "Autre additif (yc additif non autorisé en UE)",
                                "Résidu d'additif feed (yc coccidiostatique, histomonostatique)",
                                "Additif - Feed",
                                "Feed - additif non autorisé",
                                "Feed - non-respect condition d'autorisation",
                                "Auxilliaire technologique",
                                "Non-respect catégorie denrée / domaine d'application",
                                "Non-respect condition d'emploi / dose résiduelle",
                                "Résidu d'auxilliaire technologique et impureté issue",
                                "Enzyme",
                                "Complément alimentaire non télédéclaré",
                                "Déchet, produit technique non-alimentaire (yc feed)",
                                "Feed - MP interdite",
                                "Feed - autre MP interdite",
                                "Feed - emballage de produit des IAA",
                                "Feed - semence ou plant traité et dérivé",
                                "Feed - sous-produit animal",
                                "Feed - Produit animal interdit / feed ban (yc PAT)",
                                "Feed - SPAn de catégorie 1 ou 2",
                                "Feed - SPAn de catégorie 3 non-conforme",
                                "Novel food",
                                "NF - CBD/autres cannabinoïdes",
                                "NF - non-respect catégorie denrée / AMM",
                                "NF - non-respect population cible / AMM",
                                "NF - surdosage/AMM",
                                "OGM",
                                "Animal GM",
                                "Microorganisme GM",
                                "Plante GM",
                                "Sous-produit animal en alimentation humaine",
                                "Stupéfiant et psychoactif",
                                "Psychoactif (hors médicament, stupéfiant, novel food)",
                                "Stupéfiant (dont THC>0,3%)",
                                "Substance interdite ou restriction / denrée enrichie ou complément alimentaire",
                                "Substance médicamenteuse",
                                "Autre substance médicamenteuse",
                                "Sibutramine",
                                "Sildénafil",
                                "Surdosage nutriment / denrée enrichie ou complément alimentaire",
                                "Levure Moisissure divers ou indéterminée",
                                "Autre résidu MV ou indéterminé (hors additif coccidiostatique et histomonostatique)",
                                "Feed - MV - animal non-cible",
                                "Feed - MV - non-respect dose / aliment médicamenteux",
                                "Résidu MV - Groupe A - substance interdite ou non autorisée, traitement illégal",
                                "Autre - Résidu MV interdit ou non autorisé",
                                "Résidu MV - Substances à effet hormonal et thyréostatique et béta-agonistes",
                                "Résidu MV - Groupe B - substance autorisée",
                                "Alaria alata",
                                "Anisakis",
                                "Autre parasite ou indéterminé",
                                "Clinostomum complanatum",
                                "Diphyllobothrium",
                                "Echinococcus",
                                "Pseudoterranova",
                                "Toxacara",
                                "Toxoplasma",
                                "Trichine",
                                "Résidu de Pesticide Biocide",
                                "Autre prion ou indéterminé",
                                "Encéphalopathie spongiforme bovine",
                                "Tremblante",
                                "Radionucléide",
                                "MCDA - Autre contaminant",
                                "MCDA - Autre perturbateur endocrinien (hors bisphénol)",
                                "MCDA - Bisphénol (hors contaminant)",
                                "MCDA - Cobalt",
                                "MCDA - Formaldéhyde",
                                "MCDA - Mélamine (hors contaminant)",
                                "MCDA - Phtalates",
                                "Autre virus alimentaire ou indéterminé",
                                "Virus de la gastroentérite aigüe (GEA) (Calicivirus, Norovirus, Sapovirus, Rotavirus, Astrovirus, Adénovirus)",
                                "Virus de l'encéphalite à tique (TBEV)",
                                "Virus de l'hépatite A (VHA)",
                                "Virus de l'hépatite E (VHE)",
                                "Virus influenza zoonotique par voie alimentaire (IAHP zoo)",
                                "Virus Nipah",
                                "Entérovirus",
                                "SA - Autre en santé animale",
                                "SA - Fièvre aphteuse",
                                "SA - Influenza aviaire hautement pathogène",
                                "SA - Peste porcine africaine",
                                "SA - Peste porcine classique",
                                "SV - Organisme de quarantaine",
                            ],
                        ),
                        ("selected_hazard__len__gt", 0),
                        ("suspicion_conclusion", "CONFIRMED"),
                    ),
                    models.Q(
                        (
                            "selected_hazard__contained_by",
                            [
                                "intoxination bacillus cereus",
                                "toxi infection bacillus cereus",
                                "bactérie intestinale",
                                "shu",
                                "gastro-enterite",
                                "vibrio parahmeolyticus",
                                "histamine",
                                "toxine des coquillages",
                                "toxine des poissons",
                                "autre",
                            ],
                        ),
                        ("selected_hazard__len__gt", 0),
                        ("suspicion_conclusion", "SUSPECTED"),
                    ),
                    models.Q(
                        models.Q(
                            ("suspicion_conclusion__in", ["SUSPECTED", "CONFIRMED"]),
                            _negated=True,
                        ),
                        ("selected_hazard__len", 0),
                    ),
                    _connector="OR",
                ),
                name="selected_hazard_constraints",
            ),
        ),
    ]
